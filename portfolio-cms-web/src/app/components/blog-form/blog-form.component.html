<div class="form-container">
  <div class="form-header">
    <h1>{{ isEditMode ? ('blogForm.editTitle' | translate) : ('blogForm.createTitle' | translate) }}</h1>
  </div>

  <div *ngIf="loading" class="loading">{{ 'blogForm.loading' | translate }}</div>
  
  <div *ngIf="error" class="error">{{ error }}</div>

  <form *ngIf="!loading" [formGroup]="blogForm" (ngSubmit)="onSubmit()" class="blog-form">
    <div class="form-group">
      <label for="title">{{ 'blogForm.title' | translate }} *</label>
      <input 
        type="text" 
        id="title" 
        formControlName="title" 
        [class.invalid]="isFieldInvalid('title')"
        [placeholder]="'blogForm.titlePlaceholder' | translate">
      <div *ngIf="isFieldInvalid('title')" class="error-message">
        {{ getErrorMessage('title') }}
      </div>
    </div>

    <div class="form-group">
      <label for="summary">{{ 'blogForm.summary' | translate }} *</label>
      <textarea 
        id="summary" 
        formControlName="summary" 
        rows="3"
        [class.invalid]="isFieldInvalid('summary')"
        [placeholder]="'blogForm.summaryPlaceholder' | translate"></textarea>
      <div *ngIf="isFieldInvalid('summary')" class="error-message">
        {{ getErrorMessage('summary') }}
      </div>
    </div>

    <div class="form-group">
      <label>{{ 'blogForm.headerImage' | translate }}</label>
      <div class="header-image-upload">
        <div *ngIf="!headerImagePreview" class="upload-placeholder">
          <input 
            type="file" 
            id="headerImage" 
            accept="image/*" 
            (change)="onHeaderImageSelected($event)"
            #fileInput>
          <label for="headerImage" class="upload-label">
            <span class="upload-icon">ðŸ“·</span>
            <span>{{ 'blogForm.chooseImage' | translate }}</span>
          </label>
        </div>
        <div *ngIf="headerImagePreview" class="image-preview">
          <img [src]="headerImagePreview" alt="Header image preview">
          <button type="button" class="remove-image-btn" (click)="removeHeaderImage()">
            <span>Ã—</span>
          </button>
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="content">{{ 'blogForm.content' | translate }} *</label>
      <div 
        #editor 
        class="quill-editor"
        [class.invalid]="isFieldInvalid('content')"></div>
      <div *ngIf="isFieldInvalid('content')" class="error-message">
        {{ getErrorMessage('content') }}
      </div>
    </div>

    <div class="form-group">
      <label for="tags">{{ 'blogForm.tags' | translate }}</label>
      <input 
        type="text" 
        id="tags" 
        formControlName="tags" 
        [placeholder]="'blogForm.tagsPlaceholder' | translate">
      <small class="hint">{{ 'blogForm.tagsHint' | translate }}</small>
    </div>

    <div class="form-group checkbox-group">
      <label>
        <input type="checkbox" formControlName="isPublished">
        <span>{{ 'blogForm.publishNow' | translate }}</span>
      </label>
    </div>

    <div class="form-actions">
      <button type="button" class="btn-cancel" (click)="cancel()">{{ 'blogForm.cancel' | translate }}</button>
      <button type="submit" class="btn-submit" [disabled]="loading">
        {{ isEditMode ? ('blogForm.update' | translate) : ('blogForm.create' | translate) }}
      </button>
    </div>
  </form>
</div>
