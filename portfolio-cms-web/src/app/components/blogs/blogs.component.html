<div class="blogs-container">
  <div class="header">
    <h1>My Blogs</h1>
    <button class="btn-primary" (click)="createBlog()">Create New Blog</button>
  </div>

  <div *ngIf="loading" class="loading">Loading blogs...</div>
  
  <div *ngIf="error" class="error">{{ error }}</div>

  <!-- Delete confirmation modal -->
  <div *ngIf="confirmDeleteId" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="delete-blog-dialog-title">
    <div class="modal-dialog">
      <h3 id="delete-blog-dialog-title">Delete Blog</h3>
      <p>Are you sure you want to delete this blog? This action cannot be undone.</p>
      <div class="modal-actions">
        <button class="btn-cancel" (click)="cancelDelete()">Cancel</button>
        <button class="btn-delete" (click)="confirmDelete()">Delete</button>
      </div>
    </div>
  </div>

  <div *ngIf="!loading && !error" class="blogs-grid">
    <div *ngIf="blogs.length === 0" class="no-data">
      No blogs found. Create your first blog!
    </div>

    <div *ngFor="let blog of blogs" class="blog-card">
      <div class="blog-header">
        <h3>{{ blog.title }}</h3>
        <span class="status" [ngClass]="getStatusClass(blog.isPublished)">
          {{ getStatusText(blog.isPublished) }}
        </span>
      </div>

      <div class="blog-meta">
        <span class="views">{{ blog.views }} views</span>
        <span class="date">{{ blog.createdAt | date:'mediumDate' }}</span>
      </div>

      <p class="blog-summary">{{ blog.summary }}</p>

      <div class="blog-tags" *ngIf="blog.tags && blog.tags.length > 0">
        <span class="tag" *ngFor="let tag of blog.tags">{{ tag }}</span>
      </div>

      <div class="blog-actions">
        <button class="btn-edit" (click)="editBlog(blog.id)">Edit</button>
        <button
          class="btn-publish"
          [class.btn-unpublish]="blog.isPublished"
          (click)="togglePublish(blog)">
          {{ blog.isPublished ? 'Unpublish' : 'Publish' }}
        </button>
        <button
          *ngIf="blog.isPublished && blog.slug"
          class="btn-copy-link"
          (click)="copyPublicLink(blog)"
          title="Copy public link">
          Copy Link
        </button>
        <button class="btn-delete" (click)="deleteBlog(blog.id)">Delete</button>
      </div>

      <div class="share-actions" *ngIf="blog.isPublished">
        <span class="share-label">Share:</span>
        <button class="btn-share btn-linkedin" (click)="shareOnLinkedIn(blog)" title="Share on LinkedIn">
          <span class="share-icon">in</span> LinkedIn
        </button>
        <button class="btn-share btn-facebook" (click)="shareOnFacebook(blog)" title="Share on Facebook">
          <span class="share-icon">f</span> Facebook
        </button>
      </div>
    </div>
  </div>
</div>

