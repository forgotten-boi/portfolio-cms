<div class="portfolios-container">
  <div class="header">
    <h1>{{ 'portfolios.title' | translate }}</h1>
    <button class="btn-primary" (click)="createPortfolio()">{{ 'portfolios.createNew' | translate }}</button>
  </div>

  <div *ngIf="loading" class="loading">{{ 'portfolios.loading' | translate }}</div>
  
  <div *ngIf="error" class="error">{{ error }}</div>

  <div *ngIf="!loading && !error" class="portfolios-grid">
    <div *ngIf="portfolios.length === 0" class="no-data">
      {{ 'portfolios.empty' | translate }}
    </div>

    <div *ngFor="let portfolio of portfolios" class="portfolio-card">
      <div class="portfolio-header">
        <div class="title-section">
          <h3>{{ portfolio.title }}</h3>
          <p class="subtitle">{{ portfolio.subtitle }}</p>
        </div>
        <span class="visibility" [ngClass]="getVisibilityClass(portfolio.isPublished)">
          {{ getVisibilityText(portfolio.isPublished) }}
        </span>
      </div>

      <p class="bio">{{ portfolio.bio }}</p>

      <div class="portfolio-meta">
        <div class="template">
          <strong>{{ 'portfolios.template' | translate }}:</strong> {{ portfolio.template }}
        </div>
        <div class="items-count">
          <strong>{{ getTotalItems(portfolio) }}</strong> {{ 'portfolios.items' | translate }}
        </div>
      </div>

      <div class="portfolio-stats">
        <div class="stat" *ngIf="portfolio.data.workExperiences?.length">
          <span class="count">{{ portfolio.data.workExperiences.length }}</span>
          <span class="label">{{ 'portfolios.work' | translate }}</span>
        </div>
        <div class="stat" *ngIf="portfolio.data.education?.length">
          <span class="count">{{ portfolio.data.education.length }}</span>
          <span class="label">{{ 'portfolios.education' | translate }}</span>
        </div>
        <div class="stat" *ngIf="portfolio.data.skills?.length">
          <span class="count">{{ portfolio.data.skills.length }}</span>
          <span class="label">{{ 'portfolios.skills' | translate }}</span>
        </div>
        <div class="stat" *ngIf="portfolio.data.projects?.length">
          <span class="count">{{ portfolio.data.projects.length }}</span>
          <span class="label">{{ 'portfolios.projects' | translate }}</span>
        </div>
        <div class="stat" *ngIf="portfolio.data.certifications?.length">
          <span class="count">{{ portfolio.data.certifications.length }}</span>
          <span class="label">{{ 'portfolios.certs' | translate }}</span>
        </div>
      </div>

      <div class="portfolio-actions">
        <button class="btn-edit" (click)="editPortfolio(portfolio.id)">{{ 'portfolios.edit' | translate }}</button>
        <button class="btn-delete" (click)="deletePortfolio(portfolio.id, portfolio.title)">{{ 'portfolios.delete' | translate }}</button>
      </div>
    </div>
  </div>
</div>
